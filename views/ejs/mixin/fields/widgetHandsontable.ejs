<textarea
        <%= field.config.required && 'required' %>
        <%= field.config.disabled && 'disabled'%>
        name="<%= key %>"
        id="form-<%= key %>">
    <%- JSON.stringify(value) %>
</textarea>
<div id="handsontable-<%= key %>"></div>

<script>

    let data<%=key%> =  JSON.parse(document.getElementById('form-<%= key %>').value);
    let container<%=key%> = document.getElementById('handsontable-<%= key %>');
    let options<%=key%> = <%- JSON.stringify(field.config.options) %>;
    let <%=key%> = new Handsontable(container<%=key%>, {
        data: data<%=key%>,
        ...options<%=key%>,
        afterChange: function (change, source) {
            if (source === 'loadData') {
                return; //don't save this change
            }

            console.log("Change", change[0]);
            let table = JSON.parse(document.getElementById('form-<%= key %>').value);
            table[change[0][0]][change[0][1]] = change[0][3];
            $('#form-<%= key %>').val(JSON.stringify(table));
        }
    });
</script>
